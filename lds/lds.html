<!DOCTYPE html>
<html lang="en">
  <style>
    .row-cols-3 {
      padding: 0.3em;
    }
    .row-cols-2 {
      padding: 0.3em;
    }
    .col button {
      min-width: 1.5em;
    }
  </style>
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Bootstrap CSS -->
    <link
      href="./css/bs502.css"
      rel="stylesheet"
      
    />
    <script src="./js/serial.js"></script>
    <link rel="icon" type="image/png" sizes="32x32" href="./images/favicon-32x32.png">
    <link rel="apple-touch-icon" href="apple-icon-180.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    
    
    
    <script src="./index.js"></script>
 
    <link rel="manifest" href="./ldsmanifest.json">

    <title>LDS Settings</title>
  </head>
  <body>
    <div class="card mb-3"  style="padding: 0;">
      <div class="card-body" style="background-color: rgb(233, 236, 236)">
        <h5 class="card-title">LDS Settings</h5>
      </div>
    </div>
    <div class="row" style="background-color: beige">
      <div class="col-sm-6" style="padding: 1rem">
        <span class="d-flex">
          <div class="row row-cols-4">
            <div class="col">
              <div class="form-check form-switch">
                <input
                  class="form-check-input"
                  type="checkbox"
                  role="switch"
                  id="flexSwitchCheckDefault"
                />
                <label class="form-check-label" for="flexSwitchCheckDefault"
                  >Manual On</label
                >
              </div>
            </div>
            <div class="col">
              <div class="form-check form-switch">
                <input
                  class="form-check-input"
                  type="checkbox"
                  role="switch"
                  id="flexSwitchCheckDefault"
                />
                <label class="form-check-label" for="flexSwitchCheckDefault"
                  >Motion Sensor</label
                >
              </div>
            </div>
            <div class="col">
              <div class="form-check form-switch">
                <input
                  class="form-check-input"
                  type="checkbox"
                  role="switch"
                  id="flexSwitchCheckDefault"
                />
                <label class="form-check-label" for="flexSwitchCheckDefault"
                  >Lamp On</label
                >
              </div>
            </div>
            <div class="col">
              <div class="form-check form-switch">
                <input
                  class="form-check-input"
                  type="checkbox"
                  role="switch"
                  id="flexSwitchCheckDefault"
                />
                <label class="form-check-label" for="flexSwitchCheckDefault"
                  >Dis Mode</label
                >
              </div>
            </div>
          </div>

           
        </span>
      </div>
      <div class="col-sm-6" style="padding: 1rem">
        <span class="d-flex">
          <div class="row row-cols-3">
            <div class="col">
              <div class="form-check form-switch">
                <input
                  class="form-check-input"
                  type="checkbox"
                  role="switch"
                  id="flexSwitchCheckDefault"
                />
                <label class="form-check-label" for="flexSwitchCheckDefault"
                  >Bluetooth</label
                >
              </div>
            </div>
            <div class="col">
              <div class="form-check form-switch">
                <input
                  class="form-check-input"
                  type="checkbox"
                  role="switch"
                  id="flexSwitchCheckDefault"
                />
                <label class="form-check-label" for="flexSwitchCheckDefault"
                  >Serial</label
                >
              </div>
            </div>
            <div class="col">
              <div class="form-check form-switch">
                <input
                  class="form-check-input"
                  type="checkbox"
                  role="switch"
                  id="flexSwitchCheckDefault"
                />
                <label class="form-check-label" for="flexSwitchCheckDefault" style="display: inline-block;"
                  >Wifi Connect</label
                >
              </div>
            </div>
          </div>

           
        </span>
        <script src="./js/serial.js"></script>
        <span class="d-flex" style="background-color: beige;">
          <select class="form-select" aria-label="Default select example">
            <option selected>Serial</option>
            <option value="1" style="max-width: fit-content">Port 1</option>
            <option value="2">Port 2</option>
            <option value="3">Port 3</option>
          </select>
          <select class="form-select" aria-label="Default select example">
            <option selected>Baud Rate</option>
            <option value="9600" style="max-width: fit-content">9600</option>
            <option value="19200">19200</option>
            <option value="38400">38400</option>
          </select>
          <button class="btn btn-secondary" id="connect-to-serial">Connect</button>
        </span>
      </div>
    </div>
    
    <div class="row" style="background-color: darkseagreen; ">
      <div class="col-sm-6" style="padding: 0;">
        <div class="card" style="background-color: rgb(230, 243, 116)">
          <div class="card-body">
            <div class="row row-cols-3">
              <div class="col">
                <p class="card-title">Month</p>
              </div>
              <div class="col">
                <p class="card-title">Lamp On Time</p>
              </div>
              <div class="col">
                <p class="card-title">Lamp Off Time</p>
              </div>
            </div>
            <div class="row row-cols-3">
              <div class="col">
                <p class="card-text">January</p>
              </div>
              <div class="col">
                <input
                  class="form-control me-2"
                  id="m1on"
                  value="00:00:00"
                  style="
                    min-width: 3em;
                    text-align: end;
                    background-color: rgb(255, 255, 255);
                  "
                  readonly
                />
              </div>
              <div class="col">
                <input
                  class="form-control me-2"
                  id="m1off"
                  value="00:00:00"
                  style="
                    min-width: 3em;
                    text-align: end;
                    background-color: rgb(255, 255, 255);
                  "
                  readonly
                />
              </div>
            </div>
            <div class="row row-cols-3">
              <div class="col">
                <p class="card-text">February</p>
              </div>
              <div class="col">
                <input
                  class="form-control me-2"
                  id="m2on"
                  value="00:00:00"
                  style="
                    min-width: 3em;
                    text-align: end;
                    background-color: rgb(255, 255, 255);
                  "
                  readonly
                />
              </div>
              <div class="col">
                <input
                  class="form-control me-2"
                  id="m2off"
                  value="00:00:00"
                  style="
                    min-width: 3em;
                    text-align: end;
                    background-color: rgb(255, 255, 255);
                  "
                  readonly
                />
              </div>
            </div>
            <div class="row row-cols-3">
              <div class="col">
                <p class="card-text">March</p>
              </div>
              <div class="col">
                <input
                  class="form-control me-2"
                  id="m3on"
                  value="00:00:00"
                  style="
                    min-width: 3em;
                    text-align: end;
                    background-color: rgb(255, 255, 255);
                  "
                  readonly
                />
              </div>
              <div class="col">
                <input
                  class="form-control me-2"
                  id="m3off"
                  value="00:00:00"
                  style="
                    min-width: 3em;
                    text-align: end;
                    background-color: rgb(255, 255, 255);
                  "
                  readonly
                />
              </div>
            </div>
            <div class="row row-cols-3">
              <div class="col">
                <p class="card-text">April</p>
              </div>
              <div class="col">
                <input
                  class="form-control me-2"
                  id="m4on"
                  value="00:00:00"
                  style="
                    min-width: 3em;
                    text-align: end;
                    background-color: rgb(255, 255, 255);
                  "
                  readonly
                />
              </div>
              <div class="col">
                <input
                  class="form-control me-2"
                  id="m4off"
                  value="00:00:00"
                  style="
                    min-width: 3em;
                    text-align: end;
                    background-color: rgb(255, 255, 255);
                  "
                  readonly
                />
              </div>
            </div>
            <div class="row row-cols-3">
              <div class="col">
                <p class="card-text">May</p>
              </div>
              <div class="col">
                <input
                  class="form-control me-2"
                  id="m5on"
                  value="00:00:00"
                  style="
                    min-width: 3em;
                    text-align: end;
                    background-color: rgb(255, 255, 255);
                  "
                  readonly
                />
              </div>
              <div class="col">
                <input
                  class="form-control me-2"
                  id="m5off"
                  value="00:00:00"
                  style="
                    min-width: 3em;
                    text-align: end;
                    background-color: rgb(255, 255, 255);
                  "
                  readonly
                />
              </div>
            </div>
            <div class="row row-cols-3">
              <div class="col">
                <p class="card-text">June</p>
              </div>
              <div class="col">
                <input
                  class="form-control me-2"
                  id="m6on"
                  value="00:00:00"
                  style="
                    min-width: 3em;
                    text-align: end;
                    background-color: rgb(255, 255, 255);
                  "
                  readonly
                />
              </div>
              <div class="col">
                <input
                  class="form-control me-2"
                  id="m6off"
                  value="00:00:00"
                  style="
                    min-width: 3em;
                    text-align: end;
                    background-color: rgb(255, 255, 255);
                  "
                  readonly
                />
              </div>
            </div>
            <div class="row row-cols-3">
              <div class="col">
                <p class="card-text">July</p>
              </div>
              <div class="col">
                <input
                  class="form-control me-2"
                  id="m7on"
                  value="00:00:00"
                  style="
                    min-width: 3em;
                    text-align: end;
                    background-color: rgb(255, 255, 255);
                  "
                  readonly
                />
              </div>
              <div class="col">
                <input
                  class="form-control me-2"
                  id="m7off"
                  value="00:00:00"
                  style="
                    min-width: 3em;
                    text-align: end;
                    background-color: rgb(255, 255, 255);
                  "
                  readonly
                />
              </div>
            </div>
            <div class="row row-cols-3">
              <div class="col">
                <p class="card-text">August</p>
              </div>
              <div class="col">
                <input
                  class="form-control me-2"
                  id="m8on"
                  value="00:00:00"
                  style="
                    min-width: 3em;
                    text-align: end;
                    background-color: rgb(255, 255, 255);
                  "
                  readonly
                />
              </div>
              <div class="col">
                <input
                  class="form-control me-2"
                  id="m8off"
                  value="00:00:00"
                  style="
                    min-width: 3em;
                    text-align: end;
                    background-color: rgb(255, 255, 255);
                  "
                  readonly
                />
              </div>
            </div>
            <div class="row row-cols-3">
              <div class="col">
                <p class="card-text">September</p>
              </div>
              <div class="col">
                <input
                  class="form-control me-2"
                  id="m9on"
                  value="00:00:00"
                  style="
                    min-width: 3em;
                    text-align: end;
                    background-color: rgb(255, 255, 255);
                  "
                  readonly
                />
              </div>
              <div class="col">
                <input
                  class="form-control me-2"
                  id="m9off"
                  value="00:00:00"
                  style="
                    min-width: 3em;
                    text-align: end;
                    background-color: rgb(255, 255, 255);
                  "
                  readonly
                />
              </div>
            </div>
            <div class="row row-cols-3">
              <div class="col">
                <p class="card-text">October</p>
              </div>
              <div class="col">
                <input
                  class="form-control me-2"
                  id="m10on"
                  value="00:00:00"
                  style="
                    min-width: 3em;
                    text-align: end;
                    background-color: rgb(255, 255, 255);
                  "
                  readonly
                />
              </div>
              <div class="col">
                <input
                  class="form-control me-2"
                  id="m10off"
                  value="00:00:00"
                  style="
                    min-width: 3em;
                    text-align: end;
                    background-color: rgb(255, 255, 255);
                  "
                  readonly
                />
              </div>
            </div>
            <div class="row row-cols-3">
              <div class="col">
                <p class="card-text">November</p>
              </div>
              <div class="col">
                <input
                  class="form-control me-2"
                  id="m11on"
                  value="00:00:00"
                  style="
                    min-width: 3em;
                    text-align: end;
                    background-color: rgb(255, 255, 255);
                  "
                  readonly
                />
              </div>
              <div class="col">
                <input
                  class="form-control me-2"
                  id="m11off"
                  value="00:00:00"
                  style="
                    min-width: 3em;
                    text-align: end;
                    background-color: rgb(255, 255, 255);
                  "
                  readonly
                />
              </div>
            </div>
            <div class="row row-cols-3">
              <div class="col">
                <p class="card-text">December</p>
              </div>
              <div class="col">
                <input
                  class="form-control me-2"
                  id="m12on"
                  value="00:00:00"
                  style="
                    min-width: 3em;
                    text-align: end;
                    background-color: rgb(255, 255, 255);
                  "
                  readonly
                />
              </div>
              <div class="col">
                <input
                  class="form-control me-2"
                  id="m12off"
                  value="00:00:00"
                  style="
                    min-width: 3em;
                    text-align: end;
                    background-color: rgb(255, 255, 255);
                  "
                  readonly
                />
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-sm-6" style="padding: 0;">
        <div class="card" style="background-color: rgb(229, 238, 148)">
          <div class="card-body">
            <div class="row row-cols-3" style="padding-bottom: 1em">
              <div class="col">
                <p class="card-text">Month</p>
              </div>
              <div class="col">
                <p class="card-text">On Time</p>
              </div>
              <div class="col">
                <p class="card-text">Off Time</p>
              </div>
            </div>
            <div class="row row-cols-3">
              <div class="col">
                <p class="card-text">January</p>
              </div>
              <div class="col">
                <input
                  class="form-control me-2"
                  id="sm1on"
                  type="time"
                  value="00:00:00"
                  style="
                    min-width: 3em;
                    text-align: end;
                    background-color: rgb(255, 255, 255);
                  "
                />
              </div>
              <div class="col">
                <input
                  class="form-control me-2"
                  id="sm1off"
                  type="time"
                  value="00:00:00"
                  style="
                    min-width: 3em;
                    text-align: end;
                    background-color: rgb(255, 255, 255);
                  "
                />
              </div>
            </div>
            <div class="row row-cols-3">
              <div class="col">
                <p class="card-text">February</p>
              </div>
              <div class="col">
                <input
                  class="form-control me-2"
                  id="sm2on"
                  type="time"value="00:00:00"
                  style="
                    min-width: 3em;
                    text-align: end;
                    background-color: rgb(255, 255, 255);
                  "
                />
              </div>
              <div class="col">
                <input
                  class="form-control me-2"
                  id="sm2off"
                  type="time"value="00:00:00"
                  style="
                    min-width: 3em;
                    text-align: end;
                    background-color: rgb(255, 255, 255);
                  "
                />
              </div>
            </div>
            <div class="row row-cols-3">
              <div class="col">
                <p class="card-text">March</p>
              </div>
              <div class="col">
                <input
                  class="form-control me-2"
                  id="sm3on"
                  type="time"value="00:00:00"
                  style="
                    min-width: 3em;
                    text-align: end;
                    background-color: rgb(255, 255, 255);
                  "
                />
              </div>
              <div class="col">
                <input
                  class="form-control me-2"
                  id="sm3off"
                  type="time"value="00:00:00"
                  style="
                    min-width: 3em;
                    text-align: end;
                    background-color: rgb(255, 255, 255);
                  "
                />
              </div>
            </div>
            <div class="row row-cols-3">
              <div class="col">
                <p class="card-text">April</p>
              </div>
              <div class="col">
                <input
                  class="form-control me-2"
                  id="sm4on"
                  type="time"value="00:00:00"
                  style="
                    min-width: 3em;
                    text-align: end;
                    background-color: rgb(255, 255, 255);
                  "
                />
              </div>
              <div class="col">
                <input
                  class="form-control me-2"
                  id="sm4off"
                  type="time"value="00:00:00"
                  style="
                    min-width: 3em;
                    text-align: end;
                    background-color: rgb(255, 255, 255);
                  "
                />
              </div>
            </div>
            <div class="row row-cols-3">
              <div class="col">
                <p class="card-text">May</p>
              </div>
              <div class="col">
                <input
                  class="form-control me-2"
                  id="sm5on"
                  type="time"value="00:00:00"
                  style="
                    min-width: 3em;
                    text-align: end;
                    background-color: rgb(255, 255, 255);
                  "
                />
              </div>
              <div class="col">
                <input
                  class="form-control me-2"
                  id="sm5off"
                  type="time"value="00:00:00"
                  style="
                    min-width: 3em;
                    text-align: end;
                    background-color: rgb(255, 255, 255);
                  "
                />
              </div>
            </div>
            <div class="row row-cols-3">
              <div class="col">
                <p class="card-text">June</p>
              </div>
              <div class="col">
                <input
                  class="form-control me-2"
                  id="sm6on"
                  type="time"value="00:00:00"
                  style="
                    min-width: 3em;
                    text-align: end;
                    background-color: rgb(255, 255, 255);
                  "
                />
              </div>
              <div class="col">
                <input
                  class="form-control me-2"
                  id="sm6off"
                  type="time"value="00:00:00"
                  style="
                    min-width: 3em;
                    text-align: end;
                    background-color: rgb(255, 255, 255);
                  "
                />
              </div>
            </div>
            <div class="row row-cols-3">
              <div class="col">
                <p class="card-text">July</p>
              </div>
              <div class="col">
                <input
                  class="form-control me-2"
                  id="sm7on"
                  type="time"value="00:00:00"
                  style="
                    min-width: 3em;
                    text-align: end;
                    background-color: rgb(255, 255, 255);
                  "
                />
              </div>
              <div class="col">
                <input
                  class="form-control me-2"
                  id="sm7off"
                  type="time"value="00:00:00"
                  style="
                    min-width: 3em;
                    text-align: end;
                    background-color: rgb(255, 255, 255);
                  "
                />
              </div>
            </div>
            <div class="row row-cols-3">
              <div class="col">
                <p class="card-text">August</p>
              </div>
              <div class="col">
                <input
                  class="form-control me-2"
                  id="sm8on"
                  type="time"value="00:00:00"
                  style="
                    min-width: 3em;
                    text-align: end;
                    background-color: rgb(255, 255, 255);
                  "
                />
              </div>
              <div class="col">
                <input
                  class="form-control me-2"
                  id="sm8off"
                  type="time"value="00:00:00"
                  style="
                    min-width: 3em;
                    text-align: end;
                    background-color: rgb(255, 255, 255);
                  "
                />
              </div>
            </div>
            <div class="row row-cols-3">
              <div class="col">
                <p class="card-text">September</p>
              </div>
              <div class="col">
                <input
                  class="form-control me-2"
                  id="sm9on"
                  type="time"value="00:00:00"
                  style="
                    min-width: 3em;
                    text-align: end;
                    background-color: rgb(255, 255, 255);
                  "
                />
              </div>
              <div class="col">
                <input
                  class="form-control me-2"
                  id="sm9off"
                  type="time"value="00:00:00"
                  style="
                    min-width: 3em;
                    text-align: end;
                    background-color: rgb(255, 255, 255);
                  "
                />
              </div>
            </div>
            <div class="row row-cols-3">
              <div class="col">
                <p class="card-text">October</p>
              </div>
              <div class="col">
                <input
                  class="form-control me-2"
                  id="sm10on"
                  type="time"value="00:00:00"
                  style="
                    min-width: 3em;
                    text-align: end;
                    background-color: rgb(255, 255, 255);
                  "
                />
              </div>
              <div class="col">
                <input
                  class="form-control me-2"
                  id="sm10off"
                  type="time"value="00:00:00"
                  style="
                    min-width: 3em;
                    text-align: end;
                    background-color: rgb(255, 255, 255);
                  "
                />
              </div>
            </div>
            <div class="row row-cols-3">
              <div class="col">
                <p class="card-text">November</p>
              </div>
              <div class="col">
                <input
                  class="form-control me-2"
                  id="sm11on"
                  type="time"value="00:00:00"
                  style="
                    min-width: 3em;
                    text-align: end;
                    background-color: rgb(255, 255, 255);
                  "
                />
              </div>
              <div class="col">
                <input
                  class="form-control me-2"
                  id="sm11off"
                  type="time"value="00:00:00"
                  style="
                    min-width: 3em;
                    text-align: end;
                    background-color: rgb(255, 255, 255);
                  "
                />
              </div>
            </div>
            <div class="row row-cols-3">
              <div class="col">
                <p class="card-text">December</p>
              </div>
              <div class="col">
                <input
                  class="form-control me-2"
                  id="sm12on"
                  type="time"value="00:00:00"
                  style="
                    min-width: 3em;
                    text-align: end;
                    background-color: rgb(255, 255, 255);
                  "
                />
              </div>
              <div class="col">
                <input
                  class="form-control me-2"
                  id="sm12off"
                  type="time"value="00:00:00"
                  style="
                    min-width: 3em;
                    text-align: end;
                    background-color: rgb(255, 255, 255);
                  "
                />
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <nav style="background-color: darksalmon; padding: 1em;">
      <div class="row row-cols-4" style="padding: 0;">
        <div class="col">
          <button class="btn btn-info" type="button" onclick="readsettings()" style="width: 100%">
            Read Settings
          </button>
        </div>
        <div class="col">
          <button class="btn btn-danger" type="button" onclick="loadsettings()" style="width: 100%">
            Load Settings
          </button>
        </div>
        <div class="col">
          <button class="btn btn-primary" type="button" style="width: 100%">
            Get Status
          </button>
        </div>
        <div class="col">
          <button class="btn btn-warning" type="button" style="width: 100%">
            Exit
          </button>
        </div>
      </div>
    </nav>
    

    <!-- Optional JavaScript; choose one of the two! -->

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script
    src="./js/bs502.js"
  ></script>
  <script>
    window.addEventListener("load", () => {
      if ("serviceWorker" in navigator) {
        navigator.serviceWorker
        .register("ldsservice-worker.js")
        .then((registration) => console.log("yoo, Service worker registered"))
        .catch((error) => console.log("Service worker not registered", error));
      
      }
    });
    </script>

    <!-- Option 2: Separate Popper and Bootstrap JS -->
    <!--
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
    -->
  </body>
</html>

<script>
  const serialLEDController = new SerialLEDController();
  const connect = document.getElementById('connect-to-serial');
  const getSerialMessages = document.getElementById('get-serial-messages');
  const messageForm = document.getElementById('message-form');
  const messageInput = document.getElementById('message-input');
  const submitButton = document.getElementById('submit-button');
  const serialMessagesContainer = document.getElementById('serial-messages-container');

  connect.addEventListener('pointerdown', () => {
    serialLEDController.init();

    serialMessagesContainer.removeAttribute('disabled');
    messageInput.removeAttribute('disabled');
    submitButton.removeAttribute('disabled');
  });

  messageForm.addEventListener('submit', event => {
    event.preventDefault();
    serialLEDController.write(event.target.firstElementChild.value);
    getSerialMessage();
  });

  getSerialMessages.addEventListener('pointerdown', async () => {
    getSerialMessage();
  });

  async function getSerialMessage() {
    serialMessagesContainer.innerText += await serialLEDController.read() + '\n';
  }

</script>